# ä¸€ã€ geodata è§„åˆ™é›†æ–‡ä»¶è¯´æ˜
## 1. æ–‡ä»¶ç±»å‹
â‘  [Clash](https://github.com/Dreamacro/clash) geodata è§„åˆ™é›†æ–‡ä»¶ï¼ŒåŒ…æ‹¬ï¼šgeosite.datã€Country.mmdbã€geoip.dat å’Œ geoip.metadbï¼ˆä»…é™ [Clash.Meta å†…æ ¸](https://github.com/MetaCubeX/mihomo)ï¼‰ç­‰  
â‘¡ [sing-box](https://github.com/SagerNet/sing-box) geodata è§„åˆ™é›†æ–‡ä»¶ï¼ŒåŒ…æ‹¬ï¼šgeosite.db å’Œ geoip.db ç­‰
## 2. æ•°æ®æº
â‘  æ¯å¤©å‡Œæ™¨ 3 ç‚¹ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰è‡ªåŠ¨æ„å»ºï¼Œæ ¹æ® [Loyalsoldier/v2ray-rules-dat](https://github.com/Loyalsoldier/v2ray-rules-dat) å’Œ [Loyalsoldier/geoip](https://github.com/Loyalsoldier/geoip) è¿›è¡Œæ·±åº¦å®šåˆ¶ï¼Œå¯ç‚¹å‡»æŸ¥çœ‹åŒ…å«çš„[åŸŸååˆ—è¡¨](https://github.com/DustinWin/ruleset_geodata/tree/domains)å’Œ [IP æ®µåˆ—è¡¨](https://github.com/DustinWin/ruleset_geodata/tree/ips)  
â‘¡ `geosite,ads,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª` æºé‡‡ç”¨ [privacy-protection-tools/anti-AD](https://github.com/privacy-protection-tools/anti-AD)  
â‘¢ `geosite,private,ğŸ”’ ç§æœ‰ç½‘ç»œ` æºé‡‡ç”¨ [v2fly/domain-list-community/private](https://github.com/v2fly/domain-list-community/blob/master/data/private) å’Œ [blackmatrix7/ios_rule_script/Lan](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/Lan) ç»„åˆï¼Œå¹¶æ·»åŠ ä¸»æµ [Clash dashboard åœ¨çº¿é¢æ¿](https://github.com/DustinWin/clash_singbox-tools/tree/main/Clash-dashboard)åŸŸåï¼ˆ`clash.razord.top`ã€`clash.metacubex.one`ã€`yacd.haishan.me`ã€`yacd.metacubex.one` å’Œ `d.metacubex.one`ï¼‰  
â‘£ `geosite,microsoft-cn,â“‚ï¸ å¾®è½¯æœåŠ¡` æºé‡‡ç”¨ [v2fly/domain-list-community/microsoft@cn](https://github.com/v2fly/domain-list-community/blob/master/data/microsoft)  
â‘¤ `geosite,apple-cn,ğŸ è‹¹æœæœåŠ¡` æºé‡‡ç”¨ [felixonmars/dnsmasq-china-list/apple.china.conf](https://github.com/felixonmars/dnsmasq-china-list)  
â‘¥ `geosite,google-cn,ğŸ“¢ è°·æ­ŒæœåŠ¡` æºé‡‡ç”¨ [felixonmars/dnsmasq-china-list/google.china.conf](https://github.com/felixonmars/dnsmasq-china-list)  
â‘¦ `geosite,games-cn,ğŸ® æ¸¸æˆå¹³å°` æºé‡‡ç”¨ [v2fly/domain-list-community/category-games@cn](https://github.com/v2fly/domain-list-community/blob/master/data/category-games)ã€[blackmatrix7/ios_rule_script/SteamCN](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/SteamCN) å’Œ [blackmatrix7/ios_rule_script/GameDownloadCN](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/Game/GameDownloadCN) ç»„åˆ  
â‘§ `geosite,netflix,ğŸ¥ å¥ˆé£è§†é¢‘` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/Netflix](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/Netflix)  
â‘¨ `geosite,disney,ğŸ“½ï¸ è¿ªå£«å°¼+` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/Disney](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/Disney)  
â‘© `geosite,max,ğŸï¸ Max` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/HBO](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/HBO)  
â‘ª `geosite,primevideo,ğŸ¬ Prime Video` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/PrimeVideo](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/PrimeVideo)  
â‘« `geosite,appletv,ğŸ Apple TV+` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/AppleTV](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/AppleTV)  
â‘¬ `geosite,youtube,ğŸ“¹ æ²¹ç®¡è§†é¢‘` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/YouTube](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/YouTube)  
â‘­ `geosite,tiktok,ğŸµ TikTok` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/TikTok](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/TikTok)  
â‘® `geosite,bilibili,ğŸ“º å“”å“©å“”å“©` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/BiliBili](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/BiliBili)  
â‘¯ `geosite,ai,ğŸ¤– äººå·¥æ™ºèƒ½` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/OpenAI](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/OpenAI)ã€[blackmatrix7/ios_rule_script/Bing](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/Bing) å’Œ [blackmatrix7/ios_rule_script/BardAI](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/BardAI) ç»„åˆ  
â‘° `geosite,networktest,ğŸ“ˆ ç½‘ç»œæµ‹è¯•` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/Speedtest](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/Speedtest) å’Œ IPv6 æµ‹è¯•åŸŸåå…³é”®å­—ï¼ˆ`keyword`ï¼ŒåŒ…æ‹¬ï¼š`ipv6-test`ã€`test-ipv6`ã€`ipv6test` å’Œ `testipv6`ï¼‰ç»„åˆ    
â‘± `geosite,proxy,ğŸªœ ä»£ç†åŸŸå` æºé‡‡ç”¨ [cokebar/gfwlist2dnsmasq](https://github.com/cokebar/gfwlist2dnsmasq) ç”Ÿæˆçš„ [gfwlist](https://github.com/gfwlist/gfwlist) å’Œ [Loyalsoldier/domain-list-custom/geolocation-!cn.txt](https://github.com/Loyalsoldier/domain-list-custom) ç»„åˆ  
â‘² `geosite,cn,ğŸ”— ç›´è¿åŸŸå` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/ChinaMax](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/ChinaMax)  
â‘³ `geoip,netflix,ğŸ¥ å¥ˆé£è§†é¢‘` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/Netflix/Netflix_IP.txt](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/Netflix)  
ã‰‘ `geoip,telegram,ğŸ“² ç”µæŠ¥æ¶ˆæ¯` æºé‡‡ç”¨ [Telegram IP æ®µ](https://core.telegram.org/resources/cidr.txt)  
ã‰’ `geoip,private,ğŸ”’ ç§æœ‰ç½‘ç»œ` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/Lan](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/Lan)  
ã‰“ `geoip,cn,ğŸ‡¨ğŸ‡³ å›½å†… IP` æºé‡‡ç”¨ [GeoLite2/cn.txt](https://dev.maxmind.com/geoip/geolite2-free-geolocation-data)ã€[17mon/china_ip_list](https://github.com/17mon/china_ip_list)ã€[gaoyifan/china-operator-ip](https://github.com/gaoyifan/china-operator-ip) å’Œ [blackmatrix7/ios_rule_script/ChinaIPs/ChinaIPs_IP.txt](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/ChinaIPs) ç»„åˆ  
**è§„åˆ™é›†æ–‡ä»¶åŒ…å«çš„è§„åˆ™å¯¹åº”å…³ç³»å¦‚ä¸‹è¡¨ï¼š**
|è§„åˆ™é›†æ–‡ä»¶åç§°|åŒ…å«è§„åˆ™|
|-----|-----|
|geosite-all.dat å’Œ geosite-all.db|`ads`ã€`private`ã€`microsoft-cn`ã€`apple-cn`ã€`google-cn`ã€`games-cn`ã€`netflix`ã€`disney`ã€`max`ã€`primevideo`ã€`appletv`ã€`youtube`ã€`tiktok`ã€`bilibili`ã€`ai`ã€`networktest`ã€`proxy` å’Œ `cn`|
|geosite-all-lite.dat å’Œ geosite-all-lite.db|~~`ads`~~ã€`private`ã€`microsoft-cn`ã€`apple-cn`ã€`google-cn`ã€`games-cn`ã€`netflix`ã€`disney`ã€`max`ã€`primevideo`ã€`appletv`ã€`youtube`ã€`tiktok`ã€`bilibili`ã€`ai`ã€`networktest`ã€`proxy` å’Œ `cn`|
|geosite.dat å’Œ geosite.db|`ads`ã€`private`ã€`microsoft-cn`ã€`apple-cn`ã€`google-cn`ã€`games-cn`ã€`networktest`ã€`proxy` å’Œ `cn`|
|geosite-lite.dat å’Œ geosite-lite.db|~~`ads`~~ã€`private`ã€`microsoft-cn`ã€`apple-cn`ã€`google-cn`ã€`games-cn`ã€`networktest`ã€`proxy` å’Œ `cn`|
|geoip-all.datã€Country-all.mmdbã€geoip-all.metadb å’Œ geoip-all.db|æ¥æºäº [Loyalsoldier/geoip](https://github.com/Loyalsoldier/geoip)ï¼Œ[ç‚¹æ­¤æŸ¥çœ‹](https://github.com/Loyalsoldier/geoip/tree/release/text)|
|geoip.datã€Country.mmdbã€geoip.metadb å’Œ geoip.db|`netflix`ã€`telegram`ã€`private` å’Œ `cn`|
|geoip-lite.datã€Country-lite.mmdbã€geoip-lite.metadb å’Œ geoip-lite.db|~~`netflix`~~ã€`telegram`ã€`private` å’Œ `cn`|
## 3. æ–‡ä»¶ä¸‹è½½ï¼ˆä»¥ geosite.datã€geosite.dbã€geoip.datã€Country.mmdbã€geoip.metadb å’Œ geoip.db ä¸ºä¾‹ï¼‰
<table>
  <tr>
    <td rowspan="3">geosite.dat</td>
    <td>GitHub æºï¼šhttps://raw.githubusercontent.com/DustinWin/ruleset_geodata/clash/geosite.dat</td>
  </tr>
  <tr>
    <td>jsDelivr æºï¼šhttps://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/geosite.dat</td>
  </tr>
  <tr>
    <td>GitHub Proxy æºï¼šhttps://mirror.ghproxy.com/https://raw.githubusercontent.com/DustinWin/ruleset_geodata/clash/geosite.dat</td>
  </tr>
  <tr>
    <td rowspan="3">geosite.db</td>
    <td>GitHub æºï¼šhttps://raw.githubusercontent.com/DustinWin/ruleset_geodata/sing-box/geosite.db</td>
  </tr>
  <tr>
    <td>jsDelivr æºï¼šhttps://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/geosite.db</td>
  </tr>
  <tr>
    <td>GitHub Proxy æºï¼šhttps://mirror.ghproxy.com/https://raw.githubusercontent.com/DustinWin/ruleset_geodata/sing-box/geosite.db</td>
  </tr>
  <tr>
    <td rowspan="3">geoip.dat</td>
    <td>GitHub æºï¼šhttps://raw.githubusercontent.com/DustinWin/ruleset_geodata/clash/geoip.dat</td>
  </tr>
  <tr>
    <td>jsDelivr æºï¼šhttps://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/geoip.dat</td>
  </tr>
  <tr>
    <td>GitHub Proxy æºï¼šhttps://mirror.ghproxy.com/https://raw.githubusercontent.com/DustinWin/ruleset_geodata/clash/geoip.dat</td>
  </tr>
    <tr>
    <td rowspan="3">Country.mmdb</td>
    <td>GitHub æºï¼šhttps://raw.githubusercontent.com/DustinWin/ruleset_geodata/clash/Country.mmdb</td>
  </tr>
  <tr>
    <td>jsDelivr æºï¼šhttps://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/Country.mmdb</td>
  </tr>
  <tr>
    <td>GitHub Proxy æºï¼šhttps://mirror.ghproxy.com/https://raw.githubusercontent.com/DustinWin/ruleset_geodata/clash/Country.mmdb</td>
  </tr>
  <tr>
    <td rowspan="3">geoip.metadb</td>
    <td>GitHub æºï¼šhttps://raw.githubusercontent.com/DustinWin/ruleset_geodata/clash/geoip.metadb</td>
  </tr>
  <tr>
    <td>jsDelivr æºï¼šhttps://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/geoip.metadb</td>
  </tr>
  <tr>
    <td>GitHub Proxy æºï¼šhttps://mirror.ghproxy.com/https://raw.githubusercontent.com/DustinWin/ruleset_geodata/clash/geoip.metadb</td>
  </tr>
  <tr>
    <td rowspan="3">geoip.db</td>
    <td>GitHub æºï¼šhttps://raw.githubusercontent.com/DustinWin/ruleset_geodata/sing-box/geoip.db</td>
  </tr>
  <tr>
    <td>jsDelivr æºï¼šhttps://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/geoip.db</td>
  </tr>
  <tr>
    <td>GitHub Proxy æºï¼šhttps://mirror.ghproxy.com/https://raw.githubusercontent.com/DustinWin/ruleset_geodata/sing-box/geoip.db</td>
  </tr>
</table>

## 4. æ–‡ä»¶å¯¼å…¥
### â‘  å¯¼å…¥åˆ° Linux ç«¯ï¼ˆä»¥ [ShellCrash](https://github.com/juewuy/ShellCrash) å¯¼å…¥ geosite.datã€geosite.dbã€geoip.datã€Country.mmdbã€geoip.metadb å’Œ geoip.db ä¸ºä¾‹ï¼‰
è¿æ¥ SSH åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š
```
# é€‚ç”¨äº Clash å†…æ ¸
curl -o $CRASHDIR/geosite.dat -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/geosite.dat
curl -o $CRASHDIR/geoip.dat -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/geoip.dat
curl -o $CRASHDIR/Country.mmdb -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/Country.mmdb
# é€‚ç”¨äº Clash.Meta å†…æ ¸
curl -o $CRASHDIR/geoip.metadb -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/geoip.metadb
# é€‚ç”¨äº sing-box å†…æ ¸
curl -o $CRASHDIR/geosite.db -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/geosite.db
curl -o $CRASHDIR/geoip.db -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/geoip.db
$CRASHDIR/start.sh restart
```
### â‘¡ å¯¼å…¥åˆ° Windows ç«¯ï¼ˆä»¥ [Clash Verge](https://github.com/MetaCubeX/clash-verge) å¯¼å…¥ geosite.datã€geoip.datã€Country.mmdbå’Œ geoip.metadb ä¸ºä¾‹ï¼‰
ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ CMD å‘½ä»¤æç¤ºç¬¦ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š
```
taskkill /f /t /im "Clash Verge*"
taskkill /f /t /im Clash-Verge*
taskkill /f /t /im clash-meta*
curl -o %APPDATA%\io.github.clash-verge-rev.clash-verge-rev\geosite.dat -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/geosite.dat
curl -o %APPDATA%\io.github.clash-verge-rev.clash-verge-rev\geoip.dat -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/geoip.dat
curl -o %APPDATA%\io.github.clash-verge-rev.clash-verge-rev\Country.mmdb -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/Country.mmdb
curl -o %APPDATA%\io.github.clash-verge-rev.clash-verge-rev\geoip.metadb -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/geoip.metadb
```
## 5. æ–‡ä»¶æ‹“å±•
### â‘  [user.yaml](https://github.com/DustinWin/ruleset_geodata/tree/clash-config)ï¼ˆä»…é™ Clash.Meta å†…æ ¸ï¼‰
- æ³¨ï¼šå«æœ‰â€œfakeipâ€å­—æ ·çš„ .yaml é…ç½®æ–‡ä»¶ä¸­æ‰å«æœ‰ `fake-ip-filter` å‚æ•°

ä¸åŒåç¼€åçš„ä½¿ç”¨åœºæ™¯ï¼š
|æ–‡ä»¶åç¼€|ä½¿ç”¨åœºæ™¯|
|-----|-----|
|lite.yaml|å»æ‰ Clash å¹¿å‘Šæ‹¦æˆªï¼Œæ­é… AdGuardHome|
|noprocess.yaml|ä¸å«è¿›ç¨‹åŒ¹é…æ¨¡å¼ï¼Œä»…é€‚åˆ ShellCrash ä½¿ç”¨|

â€¢ `fake-ip-filter` å‚æ•°  
`fake-ip-filter` ä¸­æ·»åŠ [å¸¸ç”¨ fake-ip åœ°å€è¿‡æ»¤åˆ—è¡¨](https://github.com/juewuy/ShellCrash/blob/master/public/fake_ip_filter.list)ï¼Œæé«˜å…¼å®¹æ€§  
`fake-ip-filter` ä¸­æ·»åŠ  [TrackersList](https://github.com/XIU2/TrackersListCollection/blob/master/all.txt)ï¼ˆudp åŸŸåï¼‰ï¼Œé˜²æ­¢ [BT ä¸‹è½½](https://github.com/c0re100/qBittorrent-Enhanced-Edition)æ— æ³•è¿æ¥ TrackersList UDP åè®®  
<img src="https://user-images.githubusercontent.com/45238096/224113233-4d76dec2-495c-4790-a00e-538fc1469639.png" width="60%"/>  
`fake-ip-filter` ä¸­æ·»åŠ  AdGuardHome ç›¸å…³åŸŸåï¼ˆåŒ…æ‹¬ï¼š`adguardteam.github.io`ã€`adrules.top`ã€`anti-ad.net` å’Œ `static.adtidy.org`ï¼‰ï¼Œé˜²æ­¢ä½œä¸ºä¸‹æ¸¸æ—¶æ£€æŸ¥æ›´æ–°å’Œä¸‹è½½â€œDNS é»‘åå•â€å¤±è´¥  
è‹¥æƒ³è‡ªå·±ç”Ÿæˆé…ç½®æ–‡ä»¶ user.yamlï¼Œå¯ä»¥ [Fork æœ¬é¡¹ç›®](https://github.com/DustinWin/ruleset_geodata/fork)åç¼–è¾‘ *.github/workflows/build.yml* æ–‡ä»¶å†…çš„ ```name: Generate `clash` geodata-xxx-user.yaml``` éƒ¨åˆ†  
è‹¥ DNS æ¨¡å¼é€‰ç”¨çš„æ˜¯ `redir-host`ï¼Œå¿…é¡»è¿›è¡Œ DNS åˆ†æµï¼ˆå¯ä»¥å‚è€ƒ [Clash.Meta å†…æ ¸ DNS åˆ†æµæ•™ç¨‹](https://github.com/DustinWin/clash_singbox-tutorials/tree/main/%E6%95%99%E7%A8%8B%E5%90%88%E9%9B%86/Clash/%E8%BF%9B%E9%98%B6%E7%AF%87)ï¼‰ï¼Œå¯ä»¥è¿›å…¥ *.github/workflows/build.yml* æ–‡ä»¶ï¼Œç¼–è¾‘ ```Generate `clash` geodata-redirhost-user.yaml``` éƒ¨åˆ†ï¼Œå°† `nameserver` ä¸­çš„ `ğŸªœ ä»£ç†åŸŸå` æ”¹æˆå¯ä»¥è®¿é—®å¤–ç½‘çš„ç­–ç•¥ç»„åç§°ï¼Œæˆ–è€…ç›´æ¥å°† `'https://dns.google/dns-query#ğŸªœ ä»£ç†åŸŸå'` ä¿®æ”¹ä¸º `'tls://dns.google'`  
â€¢ å¯¼å…¥ Linux ç«¯ï¼ˆä»¥å¯¼å…¥ ShellCrash ä¸ºä¾‹ï¼‰  
å°†ä¸‹é¢å‘½ä»¤ä¸­çš„ `{DNS æ¨¡å¼}` æ›¿æ¢ä¸ºæ­£åœ¨ä½¿ç”¨çš„ DNS æ¨¡å¼ï¼ˆ`fakeip` æˆ– `redirhost`ï¼‰  
è¿æ¥ SSH åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š
```
curl -o $CRASHDIR/yamls/user.yaml -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash-config/geodata-{DNS æ¨¡å¼}-user.yaml
$CRASHDIR/start.sh restart
```
â€¢ å¯¼å…¥ Windows ç«¯ï¼ˆä»¥å¯¼å…¥ Clash Verge ä¸ºä¾‹ï¼‰  
é¦–æ¬¡ä½¿ç”¨å¯è¿›å…¥ Clash Verge->è®¢é˜…ï¼Œæ–°å»ºâ€œMergeâ€ç±»å‹çš„é…ç½®ï¼Œå®Œæˆåç‚¹å‡»â€œä¿å­˜â€ï¼Œå³å‡»æ–°å»ºçš„ Merge æ–‡ä»¶ï¼Œç‚¹å‡»â€œå¯ç”¨â€  
è¿›å…¥æ–‡ä»¶å¤¹ *%APPDATA%\io.github.clash-verge-rev.clash-verge-rev\profiles*ï¼Œæ‰¾åˆ°ä¸ä¸Šä¸€æ­¥æ–°å»ºçš„ Merge æ–‡ä»¶ç›¸å¯¹åº”çš„ .yaml æ–‡ä»¶ï¼Œå¤åˆ¶å…¶æ–‡ä»¶åå¹¶æ›¿æ¢ä¸‹é¢å‘½ä»¤ä¸­çš„ `{Merge æ–‡ä»¶å}`  
å°†ä¸‹é¢å‘½ä»¤ä¸­çš„ `{DNS æ¨¡å¼}` æ›¿æ¢ä¸ºæ­£åœ¨ä½¿ç”¨çš„ DNS æ¨¡å¼ï¼ˆ`fakeip` æˆ– `redirhost`ï¼‰  
ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ CMD å‘½ä»¤æç¤ºç¬¦ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š
```
taskkill /f /t /im "Clash Verge*"
taskkill /f /t /im Clash-Verge*
taskkill /f /t /im clash-meta*
curl -o %APPDATA%\io.github.clash-verge-rev.clash-verge-rev\profiles\{Merge æ–‡ä»¶å}.yaml -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash-config/geodata-{DNS æ¨¡å¼}-user.yaml
```
### â‘¡ [dns.json](https://github.com/DustinWin/ruleset_geodata/tree/sing-box-config)ï¼ˆä»…é™ sing-box PuerNya ç‰ˆå†…æ ¸ï¼‰
- æ³¨ï¼šå«æœ‰â€œliteâ€åç¼€çš„ .json é…ç½®æ–‡ä»¶é€‚åˆå»æ‰äº† sing-box å¹¿å‘Šæ‹¦æˆªï¼Œä¸”é…åˆ [AdGuardHome](https://github.com/AdguardTeam/AdGuardHome) çš„æ–¹æ¡ˆ

â€¢ `dns.rules` æ•°ç»„  
`dns.rules` ä¸­æ·»åŠ  AdGuardHome ç›¸å…³åŸŸåï¼ˆåŒ…æ‹¬ï¼š`adguardteam.github.io`ã€`adrules.top`ã€`anti-ad.net` å’Œ `static.adtidy.org`ï¼‰ï¼Œé˜²æ­¢ä½œä¸ºä¸‹æ¸¸æ—¶æ£€æŸ¥æ›´æ–°å’Œä¸‹è½½â€œDNS é»‘åå•â€å¤±è´¥  
â€¢ å¯¼å…¥ Linux ç«¯ï¼ˆä»¥å¯¼å…¥ ShellCrash ä¸ºä¾‹ï¼‰   
è¿æ¥ SSH åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š
```
curl -o $CRASHDIR/jsons/dns.json -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-config/geodata-dns.json
$CRASHDIR/start.sh restart
```
### â‘¢ æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼ˆä»¥ ShellCrash ä¸ºä¾‹ï¼Œå®‰è£…è·¯å¾„ä¸º */data/ShellCrash*ï¼‰
è¿æ¥ SSH åæ‰§è¡Œ `vi $CRASHDIR/task/task.user`ï¼ŒæŒ‰ä¸€ä¸‹ Ins é”®ï¼ˆInsert é”®ï¼‰ï¼Œç²˜è´´å¦‚ä¸‹å†…å®¹ï¼š
```
# é€‚ç”¨äº Clash å†…æ ¸
201#curl -o /data/ShellCrash/geosite.dat -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/geosite.dat && curl -o /data/ShellCrash/Country.mmdb -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/Country.mmdb && curl -o /data/ShellCrash/geoip.dat -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/geoip.dat && /data/ShellCrash/start.sh restart >/dev/null 2>&1#æ›´æ–°geodataè·¯ç”±è§„åˆ™æ–‡ä»¶
# é€‚ç”¨äº Clash.Meta å†…æ ¸
202#curl -o /data/ShellCrash/geoip.metadb -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/geoip.metadb && /data/ShellCrash/start.sh restart >/dev/null 2>&1#æ›´æ–°geodataè·¯ç”±è§„åˆ™æ–‡ä»¶
203#curl -o /data/ShellCrash/yamls/user.yaml -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash-config/geodata-{DNS æ¨¡å¼}-user.yaml && /data/ShellCrash/start.sh restart >/dev/null 2>&1#æ›´æ–°user.yaml
# é€‚ç”¨äº sing-box å†…æ ¸
204#curl -o /data/ShellCrash/geosite.db -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/geosite.db && curl -o /data/ShellCrash/geoip.db -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/geoip.db && /data/ShellCrash/start.sh restart >/dev/null 2>&1#æ›´æ–°geodataè·¯ç”±è§„åˆ™æ–‡ä»¶
```
æŒ‰ä¸€ä¸‹ Esc é”®ï¼ˆé€€å‡ºé”®ï¼‰ï¼Œè¾“å…¥è‹±æ–‡å†’å· `:`ï¼Œç»§ç»­è¾“å…¥ `wq` å¹¶å›è½¦  
æ‰§è¡Œ `crash`ï¼Œè¿›å…¥ ShellCrash->5 é…ç½®è‡ªåŠ¨ä»»åŠ¡->1 æ·»åŠ è‡ªåŠ¨ä»»åŠ¡ï¼Œå¯ä»¥çœ‹åˆ°æœ«å°¾å°±æœ‰æ·»åŠ çš„å®šæ—¶ä»»åŠ¡ï¼Œè¾“å…¥å¯¹åº”çš„æ•°å­—å¹¶å›è½¦åå¯è®¾ç½®æ‰§è¡Œæ¡ä»¶
# äºŒã€ ruleset è§„åˆ™é›†æ–‡ä»¶è¯´æ˜
## 1. æ–‡ä»¶ç±»å‹
â‘  Clash ruleset è§„åˆ™é›†æ–‡ä»¶ï¼Œæ ¼å¼ä¸º `.yaml`ï¼ˆ`format: yaml`ï¼‰  
â‘¡ sing-box ruleset è§„åˆ™é›†æ–‡ä»¶ï¼Œæ ¼å¼æœ‰ `.json`ï¼ˆ`"format": "source"`ï¼‰å’Œ `.srs`ï¼ˆ`"format": "binary"`ï¼‰
## 2. æ•°æ®æº
â‘  æ¯å¤©å‡Œæ™¨ 3 ç‚¹ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰è‡ªåŠ¨æ„å»º  
â‘¡ `rule-set,ads,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª` æºé‡‡ç”¨ [privacy-protection-tools/anti-AD](https://github.com/privacy-protection-tools/anti-AD)  
â‘¢ `rule-set,private,ğŸ”’ ç§æœ‰ç½‘ç»œ` æºé‡‡ç”¨ [v2fly/domain-list-community/private](https://github.com/v2fly/domain-list-community/blob/master/data/private) å’Œ [blackmatrix7/ios_rule_script/Lan](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/Lan) ç»„åˆï¼Œå¹¶æ·»åŠ ä¸»æµ [Clash dashboard åœ¨çº¿é¢æ¿](https://github.com/DustinWin/clash_singbox-tools/tree/main/Clash-dashboard)åŸŸåï¼ˆ`clash.razord.top`ã€`clash.metacubex.one`ã€`yacd.haishan.me`ã€`yacd.metacubex.one` å’Œ `d.metacubex.one`ï¼‰  
â‘£ `rule-set,microsoft-cn,â“‚ï¸ å¾®è½¯æœåŠ¡` æºé‡‡ç”¨ [v2fly/domain-list-community/microsoft@cn](https://github.com/v2fly/domain-list-community/blob/master/data/microsoft)  
â‘¤ `rule-set,apple-cn,ğŸ è‹¹æœæœåŠ¡` æºé‡‡ç”¨ [felixonmars/dnsmasq-china-list/apple.china.conf](https://github.com/felixonmars/dnsmasq-china-list)  
â‘¥ `rule-set,google-cn,ğŸ“¢ è°·æ­ŒæœåŠ¡` æºé‡‡ç”¨ [felixonmars/dnsmasq-china-list/google.china.conf](https://github.com/felixonmars/dnsmasq-china-list)  
â‘¦ `rule-set,games-cn,ğŸ® æ¸¸æˆå¹³å°` æºé‡‡ç”¨ [v2fly/domain-list-community/category-games@cn](https://github.com/v2fly/domain-list-community/blob/master/data/category-games)ã€[blackmatrix7/ios_rule_script/SteamCN](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/SteamCN) å’Œ [blackmatrix7/ios_rule_script/GameDownloadCN](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/Game/GameDownloadCN) ç»„åˆ  
â‘§ `rule-set,netflix,ğŸ¥ å¥ˆé£è§†é¢‘` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/Netflix](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/Netflix)  
â‘¨ `rule-set,disney,ğŸ“½ï¸ è¿ªå£«å°¼+` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/Disney](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/Disney)  
â‘© `rule-set,max,ğŸï¸ Max` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/HBO](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/HBO)  
â‘ª `rule-set,primevideo,ğŸ¬ Prime Video` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/PrimeVideo](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/PrimeVideo)  
â‘« `rule-set,appletv,ğŸ Apple TV+` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/AppleTV](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/AppleTV)  
â‘¬ `rule-set,youtube,ğŸ“¹ æ²¹ç®¡è§†é¢‘` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/YouTube](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/YouTube)  
â‘­ `rule-set,tiktok,ğŸµ TikTok` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/TikTok](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/TikTok)  
â‘® `rule-set,bilibili,ğŸ“º å“”å“©å“”å“©` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/BiliBili](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/BiliBili)  
â‘¯ `rule-set,ai,ğŸ¤– äººå·¥æ™ºèƒ½` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/OpenAI](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/OpenAI)ã€[blackmatrix7/ios_rule_script/Bing](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/Bing) å’Œ [blackmatrix7/ios_rule_script/BardAI](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/BardAI) ç»„åˆ  
â‘° `rule-set,networktest,ğŸ“ˆ ç½‘ç»œæµ‹è¯•` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/Speedtest](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/Speedtest) å’Œ IPv6 æµ‹è¯•åŸŸåå…³é”®å­—ï¼ˆ`keyword`ï¼ŒåŒ…æ‹¬ï¼š`ipv6-test`ã€`test-ipv6`ã€`ipv6test` å’Œ `testipv6`ï¼‰ç»„åˆ    
â‘± `rule-set,proxy,ğŸªœ ä»£ç†åŸŸå` æºé‡‡ç”¨ [cokebar/gfwlist2dnsmasq](https://github.com/cokebar/gfwlist2dnsmasq) ç”Ÿæˆçš„ [gfwlist](https://github.com/gfwlist/gfwlist) å’Œ [Loyalsoldier/domain-list-custom/geolocation-!cn.txt](https://github.com/Loyalsoldier/domain-list-custom) ç»„åˆ  
â‘² `rule-set,cn,ğŸ”— ç›´è¿åŸŸå` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/ChinaMax](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/ChinaMax)  
â‘³ `rule-set,telegramip,ğŸ“² ç”µæŠ¥æ¶ˆæ¯` æºé‡‡ç”¨ [Telegram IP æ®µ](https://core.telegram.org/resources/cidr.txt)  
ã‰‘ `rule-set,privateip,ğŸ”’ ç§æœ‰ç½‘ç»œ` æºé‡‡ç”¨ [blackmatrix7/ios_rule_script/Lan](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/Lan)  
ã‰’ `rule-set,cnip,ğŸ‡¨ğŸ‡³ å›½å†… IP` æºé‡‡ç”¨ [GeoLite2/cn.txt](https://dev.maxmind.com/geoip/geolite2-free-geolocation-data)ã€[17mon/china_ip_list](https://github.com/17mon/china_ip_list)ã€[gaoyifan/china-operator-ip](https://github.com/gaoyifan/china-operator-ip) å’Œ [blackmatrix7/ios_rule_script/ChinaIPs/ChinaIPs_IP.txt](https://github.com/blackmatrix7/ios_rule_script/tree/master/rule/Clash/ChinaIPs) ç»„åˆ
## 3. æ–‡ä»¶ä½¿ç”¨
### â‘  Clash å†…æ ¸
- æ³¨ï¼šä»¥ä¸‹åªæ˜¯èŠ‚é€‰ï¼Œè¯·é…Œæƒ…å¥—ç”¨

```
proxy-groups:
  - {name: ğŸ“ˆ ç½‘ç»œæµ‹è¯•, type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹]}
  - {name: ğŸ”— ç›´è¿åŸŸå, type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸš€ èŠ‚ç‚¹é€‰æ‹©]}
  - {name: ğŸªœ ä»£ç†åŸŸå, type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ¯ å…¨çƒç›´è¿]}
  - {name: ğŸ® æ¸¸æˆå¹³å°, type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸš€ èŠ‚ç‚¹é€‰æ‹©]}
  - {name: ğŸ¥ å¥ˆé£è§†é¢‘, type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹]}
  - {name: ğŸ“½ï¸ è¿ªå£«å°¼+, type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹]}
  - {name: ğŸï¸ Max, type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹]}
  - {name: ğŸ¬ Prime Video, type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹]}
  - {name: ğŸ Apple TV+, type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹]}
  - {name: ğŸ“¹ æ²¹ç®¡è§†é¢‘, type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹]}
  - {name: ğŸµ TikTok, type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹]}
  - {name: ğŸ“º å“”å“©å“”å“©, type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹]}
  - {name: ğŸ¤– äººå·¥æ™ºèƒ½, type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹, ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹]}
  - {name: â“‚ï¸ å¾®è½¯æœåŠ¡, type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸš€ èŠ‚ç‚¹é€‰æ‹©]}
  - {name: ğŸ“¢ è°·æ­ŒæœåŠ¡, type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸš€ èŠ‚ç‚¹é€‰æ‹©]}
  - {name: ğŸ è‹¹æœæœåŠ¡, type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸš€ èŠ‚ç‚¹é€‰æ‹©]}
  - {name: ğŸ‡¨ğŸ‡³ å›½å†… IP, type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸš€ èŠ‚ç‚¹é€‰æ‹©]}
  - {name: ğŸ“² ç”µæŠ¥æ¶ˆæ¯, type: select, proxies: [ğŸš€ èŠ‚ç‚¹é€‰æ‹©]}
  - {name: ğŸ–¥ï¸ ç›´è¿è½¯ä»¶, type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿]}
  - {name: ğŸ”’ ç§æœ‰ç½‘ç»œ, type: select, proxies: [ğŸ¯ å…¨çƒç›´è¿]}
  - {name: ğŸ›‘ å¹¿å‘Šæ‹¦æˆª, type: select, proxies: [REJECT]}
  - {name: ğŸ¯ å…¨çƒç›´è¿, type: select, proxies: [DIRECT]}

rule-providers:
  ads:
    type: http
    behavior: domain
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/ads.yaml"
    interval: 86400

  private:
    type: http
    behavior: domain
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/private.yaml"
    interval: 86400

  microsoft-cn:
    type: http
    behavior: domain
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/microsoft-cn.yaml"
    interval: 86400

  apple-cn:
    type: http
    behavior: domain
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/apple-cn.yaml"
    interval: 86400

  google-cn:
    type: http
    behavior: domain
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/google-cn.yaml"
    interval: 86400

  games-cn:
    type: http
    behavior: domain
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/games-cn.yaml"
    interval: 86400

  netflix:
    type: http
    behavior: classical
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/netflix.yaml"
    interval: 86400

  disney:
    type: http
    behavior: domain
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/disney.yaml"
    interval: 86400

  max:
    type: http
    behavior: domain
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/max.yaml"
    interval: 86400

  primevideo:
    type: http
    behavior: domain
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/primevideo.yaml"
    interval: 86400

  appletv:
    type: http
    behavior: domain
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/appletv.yaml"
    interval: 86400

  youtube:
    type: http
    behavior: domain
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/youtube.yaml"
    interval: 86400

  tiktok:
    type: http
    behavior: domain
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/tiktok.yaml"
    interval: 86400

  bilibili:
    type: http
    behavior: domain
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/bilibili.yaml"
    interval: 86400

  ai:
    type: http
    behavior: domain
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/ai.yaml"
    interval: 86400

  networktest:
    type: http
    behavior: classical
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/networktest.yaml"
    interval: 86400

  applications:
    type: http
    behavior: classical
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/applications.yaml"
    interval: 86400

  proxy:
    type: http
    behavior: domain
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/proxy.yaml"
    interval: 86400

  cn:
    type: http
    behavior: domain
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/cn.yaml"
    interval: 86400

  telegramip:
    type: http
    behavior: ipcidr
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/telegramip.yaml"
    interval: 86400

  privateip:
    type: http
    behavior: ipcidr
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/privateip.yaml"
    interval: 86400

  cnip:
    type: http
    behavior: ipcidr
    format: yaml
    url: "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash/cnip.yaml"
    interval: 86400

rules:
  - RULE-SET,ads,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,private,ğŸ”’ ç§æœ‰ç½‘ç»œ
  - RULE-SET,microsoft-cn,â“‚ï¸ å¾®è½¯æœåŠ¡
  - RULE-SET,apple-cn,ğŸ è‹¹æœæœåŠ¡
  - RULE-SET,google-cn,ğŸ“¢ è°·æ­ŒæœåŠ¡
  - RULE-SET,games-cn,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,netflix,ğŸ¥ å¥ˆé£è§†é¢‘
  - RULE-SET,disney,ğŸ“½ï¸ è¿ªå£«å°¼+
  - RULE-SET,max,ğŸï¸ Max
  - RULE-SET,primevideo,ğŸ¬ Prime Video
  - RULE-SET,appletv,ğŸ Apple TV+
  - RULE-SET,youtube,ğŸ“¹ æ²¹ç®¡è§†é¢‘
  - RULE-SET,tiktok,ğŸµ TikTok
  - RULE-SET,bilibili,ğŸ“º å“”å“©å“”å“©
  - RULE-SET,ai,ğŸ¤– äººå·¥æ™ºèƒ½
  - RULE-SET,networktest,ğŸ“ˆ ç½‘ç»œæµ‹è¯•
  - RULE-SET,applications,ğŸ–¥ï¸ ç›´è¿è½¯ä»¶
  - RULE-SET,proxy,ğŸªœ ä»£ç†åŸŸå
  - RULE-SET,cn,ğŸ”— ç›´è¿åŸŸå
  - RULE-SET,telegramip,ğŸ“² ç”µæŠ¥æ¶ˆæ¯
  - RULE-SET,privateip,ğŸ”’ ç§æœ‰ç½‘ç»œ,no-resolve
  - RULE-SET,cnip,ğŸ‡¨ğŸ‡³ å›½å†… IP
```
### â‘¡ sing-box å†…æ ¸
- æ³¨ï¼šä»¥ä¸‹åªæ˜¯èŠ‚é€‰ï¼Œè¯·é…Œæƒ…å¥—ç”¨

```
{
  "outbounds": [
    { "tag": "ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "type": "selector", "outbounds": [ "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹", "ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹", "ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹" ] },
    { "tag": "ğŸ“ˆ ç½‘ç»œæµ‹è¯•", "type": "selector", "outbounds": [ "ğŸ¯ å…¨çƒç›´è¿", "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹", "ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹", "ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹" ] },
    { "tag": "ğŸ”— ç›´è¿åŸŸå", "type": "selector", "outbounds": [ "ğŸ¯ å…¨çƒç›´è¿", "ğŸš€ èŠ‚ç‚¹é€‰æ‹©" ] },
    { "tag": "ğŸªœ ä»£ç†åŸŸå", "type": "selector", "outbounds": [ "ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "ğŸ¯ å…¨çƒç›´è¿" ] },
    { "tag": "ğŸ® æ¸¸æˆå¹³å°", "type": "selector", "outbounds": [ "ğŸ¯ å…¨çƒç›´è¿", "ğŸš€ èŠ‚ç‚¹é€‰æ‹©" ] },
    { "tag": "ğŸ¥ å¥ˆé£è§†é¢‘", "type": "selector", "outbounds": [ "ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹" ] },
    { "tag": "ğŸ“½ï¸ è¿ªå£«å°¼+", "type": "selector", "outbounds": [ "ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹" ] },
    { "tag": "ğŸï¸ Max", "type": "selector", "outbounds": [ "ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹" ] },
    { "tag": "ğŸ¬ Prime Video", "type": "selector", "outbounds": [ "ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹" ] },
    { "tag": "ğŸ Apple TV+", "type": "selector", "outbounds": [ "ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹" ] },
    { "tag": "ğŸ“¹ æ²¹ç®¡è§†é¢‘", "type": "selector", "outbounds": [ "ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹" ] },
    { "tag": "ğŸµ TikTok", "type": "selector", "outbounds": [ "ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹" ] },
    { "tag": "ğŸ“º å“”å“©å“”å“©", "type": "selector", "outbounds": [ "ğŸ¯ å…¨çƒç›´è¿", "ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹" ] },
    { "tag": "ğŸ¤– äººå·¥æ™ºèƒ½", "type": "selector", "outbounds": [ "ğŸš€ èŠ‚ç‚¹é€‰æ‹©", "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹", "ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹" ] },
    { "tag": "â“‚ï¸ å¾®è½¯æœåŠ¡", "type": "selector", "outbounds": [ "ğŸ¯ å…¨çƒç›´è¿", "ğŸš€ èŠ‚ç‚¹é€‰æ‹©" ] },
    { "tag": "ğŸ“¢ è°·æ­ŒæœåŠ¡", "type": "selector", "outbounds": [ "ğŸ¯ å…¨çƒç›´è¿", "ğŸš€ èŠ‚ç‚¹é€‰æ‹©" ] },
    { "tag": "ğŸ è‹¹æœæœåŠ¡", "type": "selector", "outbounds": [ "ğŸ¯ å…¨çƒç›´è¿", "ğŸš€ èŠ‚ç‚¹é€‰æ‹©" ] },
    { "tag": "ğŸ‡¨ğŸ‡³ å›½å†… IP", "type": "selector", "outbounds": [ "ğŸ¯ å…¨çƒç›´è¿", "ğŸš€ èŠ‚ç‚¹é€‰æ‹©" ] },
    { "tag": "ğŸ“² ç”µæŠ¥æ¶ˆæ¯", "type": "selector", "outbounds": ["ğŸš€ èŠ‚ç‚¹é€‰æ‹©"] },
    { "tag": "ğŸ”’ ç§æœ‰ç½‘ç»œ", "type": "selector", "outbounds": ["ğŸ¯ å…¨çƒç›´è¿"] },
    { "tag": "ğŸ›‘ å¹¿å‘Šæ‹¦æˆª", "type": "selector", "outbounds": ["REJECT"] },
    { "tag": "ğŸ¯ å…¨çƒç›´è¿", "type": "selector", "outbounds": ["DIRECT"] },
    { "tag": "REJECT", "type": "block" },
    { "tag": "DIRECT", "type": "direct" }
  ],
  "route": {
    "rules": [
      { "rule_set": [ "ads" ], "outbound": "ğŸ›‘ å¹¿å‘Šæ‹¦æˆª" },
      { "rule_set": [ "private" ], "outbound": "ğŸ”’ ç§æœ‰ç½‘ç»œ" },
      { "rule_set": [ "microsoft-cn" ], "outbound": "â“‚ï¸ å¾®è½¯æœåŠ¡" },
      { "rule_set": [ "apple-cn" ], "outbound": "ğŸ è‹¹æœæœåŠ¡" },
      { "rule_set": [ "google-cn" ], "outbound": "ğŸ“¢ è°·æ­ŒæœåŠ¡" },
      { "rule_set": [ "games-cn" ], "outbound": "ğŸ® æ¸¸æˆå¹³å°" },
      { "rule_set": [ "netflix" ], "outbound": "ğŸ¥ å¥ˆé£è§†é¢‘" },
      { "rule_set": [ "disney" ], "outbound": "ğŸ“½ï¸ è¿ªå£«å°¼+" },
      { "rule_set": [ "max" ], "outbound": "ğŸï¸ Max" },
      { "rule_set": [ "primevideo" ], "outbound": "ğŸ¬ Prime Video" },
      { "rule_set": [ "appletv" ], "outbound": "ğŸ Apple TV+" },
      { "rule_set": [ "youtube" ], "outbound": "ğŸ“¹ æ²¹ç®¡è§†é¢‘" },
      { "rule_set": [ "tiktok" ], "outbound": "ğŸµ TikTok" },
      { "rule_set": [ "bilibili" ], "outbound": "ğŸ“º å“”å“©å“”å“©" },
      { "rule_set": [ "ai" ], "outbound": "ğŸ¤– äººå·¥æ™ºèƒ½" },
      { "rule_set": [ "networktest" ], "outbound": "ğŸ“ˆ ç½‘ç»œæµ‹è¯•" },
      { "rule_set": [ "proxy" ], "outbound": "ğŸªœ ä»£ç†åŸŸå" },
      { "rule_set": [ "cn" ], "outbound": "ğŸ”— ç›´è¿åŸŸå" },
      { "rule_set": [ "telegramip" ], "outbound": "ğŸ“² ç”µæŠ¥æ¶ˆæ¯" },
      { "rule_set": [ "privateip" ], "outbound": "ğŸ”’ ç§æœ‰ç½‘ç»œ" },
      { "rule_set": [ "cnip" ], "outbound": "ğŸ‡¨ğŸ‡³ å›½å†… IP" }
    ],
    "rule_set": [
      {
        "tag": "ads",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/ads.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "private",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/private.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "microsoft-cn",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/microsoft-cn.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "apple-cn",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/apple-cn.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "google-cn",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/google-cn.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "games-cn",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/games-cn.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "netflix",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/netflix.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "disney",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/disney.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "max",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/max.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "primevideo",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/primevideo.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "appletv",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/appletv.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "youtube",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/youtube.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "tiktok",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/tiktok.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "bilibili",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/bilibili.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "ai",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/ai.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "networktest",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/networktest.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "proxy",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/proxy.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "cn",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/cn.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "telegramip",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/telegramip.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "privateip",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/privateip.srs",
        "download_detour": "DIRECT"
      },
      {
        "tag": "cnip",
        "type": "remote",
        "format": "binary",
        "url": "https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box/cnip.srs",
        "download_detour": "DIRECT"
      }
    ]
  }
}
```
## 4. æ–‡ä»¶æ‹“å±•
### â‘  [user.yaml](https://github.com/DustinWin/ruleset_geodata/tree/clash-config)ï¼ˆä»…é™ Clash.Meta å†…æ ¸ï¼‰
- æ³¨ï¼šå«æœ‰â€œfakeipâ€å­—æ ·çš„ .yaml é…ç½®æ–‡ä»¶ä¸­æ‰å«æœ‰ `fake-ip-filter` å‚æ•°

ä¸åŒåç¼€åçš„ä½¿ç”¨åœºæ™¯ï¼š
|æ–‡ä»¶åç¼€|ä½¿ç”¨åœºæ™¯|
|-----|-----|
|lite.yaml|å»æ‰ Clash å¹¿å‘Šæ‹¦æˆªï¼Œæ­é… AdGuardHome|
|noprocess.yaml|ä¸å«è¿›ç¨‹åŒ¹é…æ¨¡å¼ï¼Œä»…é€‚åˆ ShellCrash ä½¿ç”¨|

â€¢ `fake-ip-filter` å‚æ•°  
`fake-ip-filter` ä¸­æ·»åŠ [å¸¸ç”¨ fake-ip åœ°å€è¿‡æ»¤åˆ—è¡¨](https://github.com/juewuy/ShellCrash/blob/master/public/fake_ip_filter.list)ï¼Œæé«˜å…¼å®¹æ€§  
`fake-ip-filter` ä¸­æ·»åŠ  [TrackersList](https://github.com/XIU2/TrackersListCollection/blob/master/all.txt)ï¼ˆudp åŸŸåï¼‰ï¼Œé˜²æ­¢ [BT ä¸‹è½½](https://github.com/c0re100/qBittorrent-Enhanced-Edition)æ— æ³•è¿æ¥ TrackersList UDP åè®®  
<img src="https://user-images.githubusercontent.com/45238096/224113233-4d76dec2-495c-4790-a00e-538fc1469639.png" width="60%"/>  
`fake-ip-filter` ä¸­æ·»åŠ  AdGuardHome ç›¸å…³åŸŸåï¼ŒåŒ…æ‹¬ï¼š`adguardteam.github.io`ï¼ˆAdGuardHome è‡ªå¸¦ DNS é»‘åå•ä¸‹è½½åŸŸåï¼‰ã€`adrules.top`ï¼ˆå¸¸ç”¨å¹¿å‘Šæ‹¦æˆªä¸‹è½½åŸŸåï¼‰ã€`anti-ad.net`ï¼ˆå¸¸ç”¨å¹¿å‘Šæ‹¦æˆªä¸‹è½½åŸŸåï¼‰å’Œ `static.adtidy.org`ï¼ˆAdGuardHome æ£€æŸ¥æ›´æ–°åŸŸåï¼‰ï¼Œé˜²æ­¢ä½œä¸ºä¸‹æ¸¸æ—¶æ£€æŸ¥æ›´æ–°å’Œä¸‹è½½â€œDNS é»‘åå•â€å¤±è´¥  
è‹¥æƒ³è‡ªå·±ç”Ÿæˆé…ç½®æ–‡ä»¶ user.yamlï¼Œå¯ä»¥ [Fork æœ¬é¡¹ç›®](https://github.com/DustinWin/ruleset_geodata/fork)åç¼–è¾‘ *.github/workflows/build.yml* æ–‡ä»¶å†…çš„ ```name: Generate `clash` ruleset-xxx-user.yaml``` éƒ¨åˆ†  
è‹¥ DNS æ¨¡å¼é€‰ç”¨çš„æ˜¯ `redir-host`ï¼Œå¿…é¡»è¿›è¡Œ DNS åˆ†æµï¼ˆå¯ä»¥å‚è€ƒ [Clash.Meta å†…æ ¸ DNS åˆ†æµæ•™ç¨‹](https://github.com/DustinWin/clash_singbox-tutorials/tree/main/%E6%95%99%E7%A8%8B%E5%90%88%E9%9B%86/Clash/%E8%BF%9B%E9%98%B6%E7%AF%87)ï¼‰ï¼Œå¯ä»¥è¿›å…¥ *.github/workflows/build.yml* æ–‡ä»¶ï¼Œç¼–è¾‘ ```Generate `clash` ruleset-redirhost-user.yaml``` éƒ¨åˆ†ï¼Œå°† `nameserver` ä¸­çš„ `ğŸªœ ä»£ç†åŸŸå` æ”¹æˆå¯ä»¥è®¿é—®å¤–ç½‘çš„ç­–ç•¥ç»„åç§°ï¼Œæˆ–è€…ç›´æ¥å°† `'https://dns.google/dns-query#ğŸªœ ä»£ç†åŸŸå'` ä¿®æ”¹ä¸º `'tls://dns.google'`  
â€¢ å¯¼å…¥ Linux ç«¯ï¼ˆä»¥å¯¼å…¥ ShellCrash ä¸ºä¾‹ï¼‰  
å°†ä¸‹é¢å‘½ä»¤ä¸­çš„ `{DNS æ¨¡å¼}` æ›¿æ¢ä¸ºæ­£åœ¨ä½¿ç”¨çš„ DNS æ¨¡å¼ï¼ˆ`fakeip` æˆ– `redirhost`ï¼‰  
è¿æ¥ SSH åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š
```
curl -o $CRASHDIR/yamls/user.yaml -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash-config/ruleset-{DNS æ¨¡å¼}-user.yaml
$CRASHDIR/start.sh restart
```
â€¢ å¯¼å…¥ Windows ç«¯ï¼ˆä»¥å¯¼å…¥ Clash Verge ä¸ºä¾‹ï¼‰  
é¦–æ¬¡ä½¿ç”¨å¯è¿›å…¥ Clash Verge->è®¢é˜…ï¼Œæ–°å»ºâ€œMergeâ€ç±»å‹çš„é…ç½®ï¼Œå®Œæˆåç‚¹å‡»â€œä¿å­˜â€ï¼Œå³å‡»æ–°å»ºçš„ Merge æ–‡ä»¶ï¼Œç‚¹å‡»â€œå¯ç”¨â€  
è¿›å…¥æ–‡ä»¶å¤¹ *%APPDATA%\io.github.clash-verge-rev.clash-verge-rev\profiles*ï¼Œæ‰¾åˆ°ä¸ä¸Šä¸€æ­¥æ–°å»ºçš„ Merge æ–‡ä»¶ç›¸å¯¹åº”çš„ .yaml æ–‡ä»¶ï¼Œå¤åˆ¶å…¶æ–‡ä»¶åå¹¶æ›¿æ¢ä¸‹é¢å‘½ä»¤ä¸­çš„ `{Merge æ–‡ä»¶å}`
å°†ä¸‹é¢å‘½ä»¤ä¸­çš„ `{DNS æ¨¡å¼}` æ›¿æ¢ä¸ºæ­£åœ¨ä½¿ç”¨çš„ DNS æ¨¡å¼ï¼ˆ`fakeip` æˆ– `redirhost`ï¼‰  
ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ CMD å‘½ä»¤æç¤ºç¬¦ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š
```
taskkill /f /t /im "Clash Verge*"
taskkill /f /t /im Clash-Verge*
taskkill /f /t /im clash-meta*
curl -o %APPDATA%\io.github.clash-verge-rev.clash-verge-rev\profiles\{Merge æ–‡ä»¶å}.yaml -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash-config/ruleset-{DNS æ¨¡å¼}-user.yaml
```
### â‘¡ [dns.json](https://github.com/DustinWin/ruleset_geodata/tree/sing-box-config)ï¼ˆä»…é™ sing-box PuerNya ç‰ˆå†…æ ¸ï¼‰
- æ³¨ï¼šå«æœ‰â€œliteâ€åç¼€çš„ .json é…ç½®æ–‡ä»¶é€‚åˆå»æ‰äº† sing-box å¹¿å‘Šæ‹¦æˆªï¼Œä¸”é…åˆ [AdGuardHome](https://github.com/AdguardTeam/AdGuardHome) çš„æ–¹æ¡ˆ

â€¢ `dns.rules` æ•°ç»„  
`dns.rules` ä¸­æ·»åŠ  AdGuardHome ç›¸å…³åŸŸåï¼ŒåŒ…æ‹¬ï¼š`adguardteam.github.io`ï¼ˆAdGuardHome è‡ªå¸¦ DNS é»‘åå•ä¸‹è½½åŸŸåï¼‰ã€`adrules.top`ï¼ˆå¸¸ç”¨å¹¿å‘Šæ‹¦æˆªä¸‹è½½åŸŸåï¼‰ã€`anti-ad.net`ï¼ˆå¸¸ç”¨å¹¿å‘Šæ‹¦æˆªä¸‹è½½åŸŸåï¼‰å’Œ `static.adtidy.org`ï¼ˆAdGuardHome æ£€æŸ¥æ›´æ–°åŸŸåï¼‰ï¼Œé˜²æ­¢ä½œä¸ºä¸‹æ¸¸æ—¶æ£€æŸ¥æ›´æ–°å’Œä¸‹è½½â€œDNS é»‘åå•â€å¤±è´¥  
â€¢ å¯¼å…¥ Linux ç«¯ï¼ˆä»¥å¯¼å…¥ ShellCrash ä¸ºä¾‹ï¼‰   
è¿æ¥ SSH åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š
```
curl -o $CRASHDIR/jsons/dns.json -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@sing-box-config/ruleset-dns.json
$CRASHDIR/start.sh restart
```
### â‘¢ æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼ˆä»¥ ShellCrash ä¸ºä¾‹ï¼Œå®‰è£…è·¯å¾„ä¸º */data/ShellCrash*ï¼‰
â€¢ è¿æ¥ SSH åæ‰§è¡Œ `vi $CRASHDIR/task/task.user`ï¼ŒæŒ‰ä¸€ä¸‹ Ins é”®ï¼ˆInsert é”®ï¼‰ï¼Œç²˜è´´å¦‚ä¸‹å†…å®¹ï¼š
```
# é€‚ç”¨äº Clash.Meta å†…æ ¸
201#curl -o /data/ShellCrash/yamls/user.yaml -L https://fastly.jsdelivr.net/gh/DustinWin/ruleset_geodata@clash-config/ruleset-{DNS æ¨¡å¼}-user.yaml && /data/ShellCrash/start.sh restart >/dev/null 2>&1#æ›´æ–°user.yaml
```
â€¢ æŒ‰ä¸€ä¸‹ Esc é”®ï¼ˆé€€å‡ºé”®ï¼‰ï¼Œè¾“å…¥è‹±æ–‡å†’å· `:`ï¼Œç»§ç»­è¾“å…¥ `wq` å¹¶å›è½¦  
â€¢ æ‰§è¡Œ `crash`ï¼Œè¿›å…¥ ShellCrash->5 é…ç½®è‡ªåŠ¨ä»»åŠ¡->1 æ·»åŠ è‡ªåŠ¨ä»»åŠ¡ï¼Œå¯ä»¥çœ‹åˆ°æœ«å°¾å°±æœ‰æ·»åŠ çš„å®šæ—¶ä»»åŠ¡ï¼Œè¾“å…¥å¯¹åº”çš„æ•°å­—å¹¶å›è½¦åå¯è®¾ç½®æ‰§è¡Œæ¡ä»¶
